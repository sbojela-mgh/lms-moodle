define ("block_learnerscript/radioslider",["jquery","block_learnerscript/report"],function(a){return RadiosToSlider={init:function init(b,c){this.KNOB_WIDTH=10;this.KNOB_MARGIN=42;this.LEVEL_MARGIN=this.KNOB_MARGIN+10;this.LABEL_WIDTH=34;this.LEVEL_WIDTH=10;this.bearer=b;this.options=c;this.currentLevel=0;this.value=null;var d=[];b.each(function(){c=a.extend({},this.defaults,c);RadiosToSlider.activate();d.push({bearer:this.bearer,setDisable:RadiosToSlider.setDisable.bind(RadiosToSlider),setEnable:RadiosToSlider.setEnable.bind(RadiosToSlider),getValue:RadiosToSlider.getValue.bind(RadiosToSlider)})})},activate:function activate(){this.numOptions=this.bearer.find("input[type=radio]").length;this.reset();this.fitContainer();this.addBaseStyle();this.addLevels();this.addBar();this.setSlider();this.addInteraction();this.setDisabled();var b=this;a(window).on("resize orientationChanged",function(){b.reset();b.fitContainer();b.addBaseStyle();b.addLevels();b.setSlider();b.addInteraction();b.setDisabled()})},reset:function reset(){var b=this.bearer.find("label"),c=this.bearer.find(".slider-level");b.each(function(){var b=a(this);b.removeClass("slider-label");b.css("left",0)});c.each(function(){a(this).remove()});this.bearer.css("width","auto")},fitContainer:function fitContainer(){if(this.options.fitContainer){this.KNOB_MARGIN=(this.bearer.width()-this.KNOB_WIDTH)/(this.numOptions-1)-this.KNOB_WIDTH;this.LEVEL_MARGIN=this.KNOB_MARGIN+10}},addBaseStyle:function addBaseStyle(){var b=0,c=this,d=this.numOptions*this.LEVEL_WIDTH+(this.numOptions-1)*this.LEVEL_MARGIN;this.bearer.find("input[type=radio]").hide();this.bearer.addClass("radios-to-slider "+this.options.size);this.bearer.css("width",d+"px");this.bearer.find("label").each(function(){var d=a(this),e=c.KNOB_WIDTH/2-c.LABEL_WIDTH/2+b*c.LEVEL_MARGIN+b*c.LEVEL_WIDTH;d.addClass("slider-label");d.css("left",e+"px");b++})},addLevels:function addLevels(){var b=this.bearer,c=0,d=this;b.find("input[type=radio]").each(function(){var c=a(this);b.append("<ins class='slider-level' data-radio='"+c.attr("id")+"' data-value="+c.val()+"></ins>")});b.find(".slider-level").each(function(){var e=a(this),f=b.css("padding-left").replace("px","")-0,g=f+c*d.LEVEL_MARGIN+c*d.LEVEL_WIDTH;e.css("left",g+"px");c++})},addBar:function addBar(){this.bearer.append("<ins class='slider-bar'><span class='slider-knob'></span></ins>")},setSlider:function setSlider(){var b=this.bearer.find("input[type=radio]"),c=this.bearer.find(".slider-level"),d=this.bearer.find(".slider-label"),e=1,f=this,g;b.each(function(){var b=a(this),c=f.bearer.find(".slider-bar"),d=b.attr("id");if(b.prop("checked")){var g=e*f.KNOB_WIDTH+(e-1)*f.KNOB_MARGIN+10*(e-1);c.css("display","block");c.width(g+"px");f.currentLevel=e}if(f.options.animation){c.addClass("transition-enabled")}e++});g=0;c.each(function(){g++;var b=a(this);if(g<f.currentLevel){b.show();b.addClass("slider-lower-level")}else if(g==f.currentLevel){b.hide()}else{b.show();b.removeClass("slider-lower-level")}});g=0;d.each(function(){g++;var b=a(this);if(g==f.currentLevel){b.addClass("slider-label-active")}else{b.removeClass("slider-label-active")}})},addInteraction:function addInteraction(){var b=this,c=b.bearer,d=c.find(".slider-level:not(.disabled)"),e=c.find("input[type=radio]:not(:disabled)");d.on("click",function(f){f.stopImmediatePropagation();var g=a(this),h=g.attr("data-value"),i=g.attr("data-radio"),j=c.find("#"+i);require(["block_learnerscript/smartfilter"],function(a){a.DurationFilter(h,b.options.reportdashboard)});j.prop("checked",!0);if(b.options.onSelect){b.options.onSelect(j,[d,e])}b.value=h;c.attr("data-value",h);b.setSlider();c.trigger("radiochange")});e.on("change",function(f){f.stopImmediatePropagation();var g=a(this),h=g.attr("value"),i=g.attr("data-radio"),j=c.find("#"+i);require(["block_learnerscript/smartfilter"],function(a){a.DurationFilter(h,b.options.reportdashboard)});j.prop("checked",!0);if(b.options.onChange){b.options.onChange(j,[d,e])}b.value=h;c.attr("data-value",h);b.setSlider();c.trigger("radiochange")})},setDisabled:function setDisabled(){if(!this.options.isDisable)return;this.setDisable()},setDisable:function setDisable(b){this.options.isDisable=!0;var c=this,d=c.bearer,e=this.bearer.find(".slider-level"),f=this.bearer.find("input[type=radio]");a.merge(e,f).each(function(){var b=a(this);b.prop("disabled",!0).addClass("disabled");b.off("click change")});if("function"==typeof b){b(e,f)}d.trigger("radiodisabled")},setEnable:function setEnable(b){this.options.isDisable=!1;var c=this,d=c.bearer,e=this.bearer.find(".slider-level"),f=this.bearer.find("input[type=radio]");a.merge(e,f).each(function(){a(this).prop("disabled",!1).removeClass("disabled");c.addInteraction()});if("function"==typeof b){b(e,f)}d.trigger("radiodenabled")},getValue:function getValue(){return this.value}}});
//# sourceMappingURL=radioslider.min.js.map
