define ("block_learnerscript/lsreportconfig",["core/ajax","jquery","jqueryui"],function(a,b){var c={slideIndex:1,currentSlide:function currentSlide(a){c.lsreportslideshow(c.slideIndex=a)},progressbar:b("#progressbar"),lsreportslideshow:function lsreportslideshow(a){var b,d=document.getElementsByClassName("mySlides"),e=document.getElementsByClassName("demo");if(a>d.length){c.slideIndex=1}if(1>a){c.slideIndex=d.length}for(b=0;b<d.length;b++){d[b].style.display="none"}d[c.slideIndex-1].style.display="block";setTimeout(function(){if(c.slideIndex>=d.length){c.currentSlide(1)}else{c.lsreportslideshow(c.slideIndex++)}},3e3)},lsconfigimportprogress:function lsconfigimportprogress(d){var e=c.progressbar.progressbar("value")||0,f=d.total,g=d.current,h=d.errorreportspositiondata,i=d.lastreportposition,j=a.call([{methodname:"block_learnerscript_importreports",args:{total:f,current:g,errorreportspositiondata:h,lastreportposition:i}}],!1);j[0].done(function(a){resp=b.parseJSON(a);c.progressbar.progressbar("value",resp.percent);if(100>resp.percent){if(resp.current&&0<resp.current){d.current=resp.current}else{d.current=d.current+1}setTimeout(function(){c.lsconfigimportprogress(d)},500)}})},lsconfigresetprogress:function lsconfigresetprogress(d){var e=a.call([{methodname:"block_learnerscript_resetlsconfig",args:{step:d}}],!1);e[0].done(function(a){resp=b.parseJSON(a);c.progressbar.progressbar("value",resp.percent);if(100==resp.percent){window.location.href=M.cfg.wwwroot+"/blocks/learnerscript/lsconfig.php?import=1"}if(100>resp.percent){if(resp.next&&0<resp.next){d=resp.next}setTimeout(function(){c.lsconfigresetprogress(d)},500)}})},lsreportconfigimport:function lsreportconfigimport(){var b=a.call([{methodname:"block_learnerscript_lsreportconfigimport",args:{}}]);b[0].done(function(){return"Message from onbeforeunload handler"})}};return{init:function init(a,d){c.progressbar.progressbar({value:!1,change:function change(){},complete:function complete(){b("#reportdashboardnav").show(500)}});if(0<b(".mySlides").length){c.lsreportslideshow(1)}if("import"==d){c.lsconfigimportprogress(a)}else if("reset"==d){c.lsconfigresetprogress(1)}window.onbeforeunload=c.lsreportconfigimport}}});
//# sourceMappingURL=lsreportconfig.min.js.map
