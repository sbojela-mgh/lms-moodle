define ("block_learnerscript/newgroup",["jquery","core/str","core/modal_factory","core/modal_events","core/fragment","block_learnerscript/ajax","core/yui","core/templates","core/modal"],function(a,b,c,d,e,f){var g=function(a,b){this.args=a;this.contextid=1;this.url=b;this.nodeContent=a.nodeContent||"ajaxForm";this.init(this.args)};g.prototype.modal=null;g.prototype.contextid=-1;g.prototype.init=function(){var b=this.getBody();a("body").append("<div class='"+this.nodeContent+"'></div>");var c=this;b.done(function(b){a(".ajaxForm").html(b.html);a("head").append(b.javascript)});var d=a("."+this.nodeContent).dialog({resizable:!0,autoOpen:!1,width:"60%",title:this.args.title,modal:!0,close:function close(){a(this).dialog("destroy").remove()}}),c=this;a("."+this.nodeContent+" .mform").bind("submit",function(a){a.preventDefault();c.submitFormAjax(this)});d.dialog("open")};g.prototype.getBody=function(a){if("undefined"==typeof a){a=null}else{this.args.jsonformdata=JSON.stringify(a)}var b=f.call({args:this.args,url:this.url},!1);return b};g.prototype.handleFormSubmissionResponse=function(b){if(b.formerror){a(".ajaxForm").html(b.html);a("head").append(b.javascript);var c=this;a("."+this.nodeContent+" .mform").bind("submit",function(a){a.preventDefault();c.submitFormAjax(this)})}else{alert("Success!")}};g.prototype.handleFormSubmissionFailure=function(){};g.prototype.submitFormAjax=function(b){this.args.jsonformdata=a(b).serialize();var c=this,d=f.call({args:this.args,url:this.url});d.done(function(a){c.handleFormSubmissionResponse(a)}).fail(function(){})};g.prototype.submitForm=function(a){a.preventDefault();this.modal.getRoot().find("form").submit()};return{init:function init(a){return new g(a,url)}}});
//# sourceMappingURL=newgroup.min.js.map
