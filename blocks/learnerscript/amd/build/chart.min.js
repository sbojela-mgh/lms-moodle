function _defineProperty(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}define ("block_learnerscript/chart",["jquery","core/ajax","block_learnerscript/highcharts","block_learnerscript/smartfilter","block_learnerscript/report"],function(a,b,d,e,f){return chart={HighchartsAjax:function HighchartsAjax(c){c.cols=JSON.stringify(c.cols);c.instanceid=c.reportid;c.filters=e.FilterData(c.instanceid);c.basicparams=JSON.stringify(e.BasicparamsData(c.instanceid));c.filters.ls_fstartdate=a("#ls_fstartdate").val();c.filters.ls_fenddate=a("#ls_fenddate").val();if("undefined"==typeof c.filters.filter_courses){var d=a(".dashboardcourses").val();if(1!=d){c.filters.filter_courses=d}}c.filters=JSON.stringify(c.filters);var f=b.call([{methodname:"block_learnerscript_generate_plotgraph",args:c}]);a("#report_plottabs").show();a("#plotreportcontainer"+c.instanceid).html("<img src=\""+M.util.image_url("loading","block_learnerscript")+"\" id=\"reportloadingimage\" />");f[0].done(function(b){b=JSON.parse(b);if(b.plot){if(!0===b.plot.error){a("#plotreportcontainer"+c.instanceid).html("<div class='alert alert-warning'>No data available</div>")}else{b.plot.reportid=c.reportid;b.plot.reportinstance=c.reportid;if(b.plot.data&&0<b.plot.data.length){require(["block_learnerscript/report"],function(a){a.generate_plotgraph(b.plot)})}else{a("#plotreportcontainer"+c.instanceid).html("<div class='alert alert-warning'>No data available</div>")}}}})},piechart:function piechart(a){d.chart(a.containerid,{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",width:a.width||null,height:a.height||null,margin:a.margin||null},credits:{enabled:!1},title:{text:a.title},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",shadow:!1,dataLabels:{enabled:a.datalabels},showInLegend:a.showlegend}},series:[{name:a.serieslabel,colorByPoint:!0,data:a.data}]})},lbchart:function lbchart(b){var c,e=b.type,f=["#336B87","#90AFC5","#688B8A","#A0B084","#FAEFD4","#A57C65","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"];if("undefined"!=typeof a(b.container).data("chartcolor")){f=["#"+a(b.container).data("chartcolor")+""]}d.chart(b.containerid,(c={chart:{type:e,height:b.height||null,zoomType:"x",styledMode:!0},colors:f,credits:{enabled:!1},title:{text:b.title},xAxis:{categories:b.categorydata,labels:{enabled:1==b.datalabels?!0:!1},title:{text:b.ylabel}},yAxis:{title:{text:b.pcalcs?b.pcalcs:b.title}},plotOptions:{bar:{dataLabels:{enabled:1==b.datalabels?!0:!1,formatter:function formatter(){return this.point.label}},enableMouseTracking:1==b.datalabels?!1:!0,borderRadius:5},spline:{dataLabels:{enabled:1==b.datalabels?!0:!1,formatter:function formatter(){return this.point.label}},enableMouseTracking:1==b.datalabels?!1:!0},column:{dataLabels:{enabled:1===b.datalabels?!0:!1,formatter:function formatter(){return this.point.label}},enableMouseTracking:1===b.datalabels?!1:!0,borderRadius:5}},tooltip:{pointFormatter:function pointFormatter(){return"<span style=\"color:"+this.series.color+";\">\u25CF</span> "+this.series.name+" - "+this.label}}},_defineProperty(c,"credits",{enabled:!0}),_defineProperty(c,"legend",{enabled:b.showlegend}),_defineProperty(c,"series",b.data),_defineProperty(c,"responsive",{rules:[{condition:{maxWidth:500},chartOptions:{legend:{align:"center",verticalAlign:"bottom",layout:"horizontal"},yAxis:{labels:{align:"left",x:0,y:10},title:{text:null}},subtitle:{text:null},credits:{enabled:!1}}}]}),c))},combinationchart:function combinationchart(b){var c=["#90AFC5","#336B87","#FAEFD4","#A57C65","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"];if("undefined"!=typeof a(b.container).data("chartcolor")){c=["#"+a(b.container).data("chartcolor")+""]}d.chart(b.containerid,{zoomType:"xy",title:{text:b.title},colors:c,xAxis:{categories:b.categorydata,crosshair:!0,labels:{enabled:1==b.datalabels?!0:!1}},yAxis:[{title:{text:b.name}},{opposite:!0,title:{text:b.name}}],credits:{enabled:!1},tooltip:{pointFormatter:function pointFormatter(){return"<span style=\"color:"+this.series.color+";\">\u25CF</span> "+this.series.name+" - "+this.label}},dataLabels:{enabled:1==b.datalabels?!0:!1,formatter:function formatter(){return this.point.label}},legend:{enabled:1==b.showlegend?!0:!1},series:b.data})},WorldMap:function WorldMap(a){d.mapChart(a.containerid,{chart:{borderWidth:1},colors:["#07575B","#66A5AD","#C4DFE6","#003B46","rgba(19,64,117,0.6)","rgba(19,64,117,0.8)","rgba(19,64,117,1)"],title:{text:a.title},credits:{enabled:!1},mapNavigation:{enabled:!0,enableMouseWheelZoom:!1,enableDoubleClickZoom:!0},legend:{title:{text:a.serieslabel,style:{color:d.theme&&d.theme.textColor||"black"}},align:"left",verticalAlign:"bottom",floating:!0,layout:"vertical",valueDecimals:0,symbolRadius:0,symbolHeight:14},colorAxis:{dataClasses:[{to:3},{from:3,to:10},{from:10,to:30},{from:30,to:100},{from:100,to:300},{from:300,to:1e3},{from:1e3}]},series:[{data:a.data,mapData:d.maps["custom/world"],joinBy:["iso-a2","code"],name:a.serieslabel,states:{hover:{color:"#a4edba"}},shadow:!1}]})},TreeMap:function TreeMap(b){d.mapChart(b.containerid,{credits:{enabled:!1},title:{text:b.title},series:[{type:"treemap",allowDrillToNode:!0,layoutAlgorithm:"squarified",events:{click:function click(b){a("#ls_courseid").val(b.point.id);f.DashboardTiles();f.DashboardWidgets()}},levelIsConstant:!1,levels:[{level:1,dataLabels:{enabled:!0,align:"left",verticalAlign:"top",style:{fontSize:"11px"}}}],data:b.data}]})},SparkLines:function SparkLines(){d.SparkLine=function(e,a,b){var c="string"==typeof e||e.nodeName,f=arguments[c?1:0],g={chart:{renderTo:f.chart&&f.chart.renderTo||this,backgroundColor:null,borderWidth:0,type:"area",margin:[2,0,2,0],width:120,height:100,style:{overflow:"visible"},skipClone:!0},title:{text:""},credits:{enabled:!1},xAxis:{labels:{enabled:!1},title:{text:null},startOnTick:!1,endOnTick:!1,tickPositions:[]},yAxis:{endOnTick:!1,startOnTick:!1,labels:{enabled:!1},title:{text:null},tickPositions:[0]},legend:{enabled:!1},tooltip:{backgroundColor:null,borderWidth:0,shadow:!1,useHTML:!0,hideDelay:0,shared:!0,padding:0,positioner:function positioner(a,b,c){return{x:c.plotX-a/2,y:c.plotY-b}}},plotOptions:{series:{animation:!1,lineWidth:1,shadow:!1,states:{hover:{lineWidth:1}},marker:{radius:1,states:{hover:{radius:2}}},fillOpacity:.25},column:{negativeColor:"#910000",borderColor:"silver",borderRadius:15}}};f=d.merge(g,f);return c?new d.Chart(e,f,b):new d.Chart(f,a)}},ProgressBar:function ProgressBar(b){var c;d.chart(b.containerid,(c={title:{text:b.title},credits:{enabled:!1},chart:{renderTo:b.containerid,type:"bar",height:b.height||15,backgroundColor:b.backgroundColor||"transparent",margin:b.margin||null},plotOptions:{bar:{borderRadius:5},series:{cursor:"pointer",point:{events:{click:function click(){if("undefined"!=typeof b.data.link){require("block_learnerscript/helper").ReportModelFromLink({container:a("#"+b.containerid),url:b.data.link})}}}}}},exporting:{enabled:!1}},_defineProperty(c,"credits",b.credits||!1),_defineProperty(c,"tooltip",b.tooltip||!1),_defineProperty(c,"legend",b.legend||!1),_defineProperty(c,"xAxis",{visible:!1}),_defineProperty(c,"yAxis",{visible:!1,min:0,max:100}),_defineProperty(c,"series",[{data:[100],grouping:!1,animation:!1,enableMouseTracking:!1,showInLegend:!1,color:"#CCC",pointWidth:15,dataLabels:{className:"highlight",format:b.format||null,enabled:!1,align:"left",style:{color:"#0294A5",textOutline:!1,fontSize:"9px",fontWeight:"normal"}}},{enableMouseTracking:!0,data:b.data||[0],color:"#0294A5",pointWidth:15,animation:{duration:250},dataLabels:{enabled:!0,inside:!0,align:"right",format:"{point.y}%",style:{color:"#FFF",textOutline:!1,fontSize:"9px",fontWeight:"normal"}}}]),c))},SparkLineReport:function SparkLineReport(){var b=+new Date,c=a(".spark-report"),e=c.length,f=+new Date,g,h,j=c.length,k,l,m,n;for(g=0;g<j;g+=1){h=a(c[g]);k=h.data("sparkline");stringLabels=h.data("labels");stringlink=h.data("link");l=k.split("; ");datalabels=stringLabels.split(", ");m=a.map(l[0].split(", "),parseFloat);m.link=stringlink;n={};if(l[1]){n.type=l[1]}n.containerid=h.attr("id");n.chartname="";n.datalabels=!1;n.showlegend=!1;n.serieslabel=!1;n.categorydata=h.text();switch(l[1]){case"pie":n.data=m;n.width="65",n.height="65";n.margin=[0,0,0,0],this.piechart(n);break;case"spline":case"bar":case"column":n.data={data:m,name:h.data("name"),type:"bar"};n.serieslabel=h.data("serieslabel");n.title=h.data("title");this.lbchart(n);break;case"progressbar":n.data=m;n.title=h.data("title");n.width="100",n.height="15";n.margin=[0,0,0,0];this.ProgressBar(n);break;default:this.SparkLines();d.SparkLine(h.attr("id"),{title:{text:""},credits:{enabled:!1},series:[{data:m,pointStart:1,dataLabels:{enabled:!1}}],tooltip:{headerFormat:"<span style=\"font-size: 10px\">"+h.parent().find("th").html()+"<br/> Q{point.x}: </span>",pointFormat:" <b>{point.y}</b>"},chart:n});break;}if(500<new Date-f){c.splice(0,g+1);setTimeout(this.SparkLineReport,0);break}}}}});
//# sourceMappingURL=chart.min.js.map
