{"version":3,"sources":["../src/smartfilter.js"],"names":["define","$","ajax","BasicparamCourse","BasicparamUser","BasicparamActivity","FilterCourse","FilterUser","FilterActivity","smartfilter","DurationFilter","value","reportdashboard","today","Date","endDate","getFullYear","getMonth","getDate","start_duration","val","getTime","show","reportid","require","reportwidget","DashboardTiles","DashboardWidgets","report","CreateReportPage","instanceid","hide","removeClass","addClass","html","FilterData","reportinstance","reportfilter","serializeObject","urlParam","name","results","RegExp","exec","window","location","href","dashboardurl","filter_courseid","filter_courses","BasicparamsData","basicparams","CourseData","args","FirstElementActive","length","courseid","CourseActivities","firstelementactive","activityid","filterrequests","filter_activities","categoryCourses","currentcategory","find","promise","call","action","basicparam","reporttype","categoryid","url","M","cfg","wwwroot","done","response","template","each","key","nearelement","element","parseInt","remove","end","append","attr","text","currentactivity","basicparamactivtylen","parents","onloadtrigger","trigger","UserCourses","currentcourse","userid","Object","keys","triggercourseactivities","EnrolledUsers","currentuser","component","components","hasOwnProperty","select2","basicparamuserlen","CohortUsers","currentcohort","cohortid"],"mappings":"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","sourcesContent":["define(['jquery',\n        'block_learnerscript/ajax',\n        'block_learnerscript/reportwidget',\n        'block_learnerscript/report',\n        'block_learnerscript/jquery.serialize-object'],\n    function($, ajax, reportwidget, report) {\n        var BasicparamCourse = $('.basicparamsform #id_filter_courses');\n        var BasicparamUser = $('.basicparamsform #id_filter_users');\n        var BasicparamActivity = $('.basicparamsform #id_filter_activities');\n\n        var FilterCourse = $('.filterform #id_filter_courses');\n        var FilterUser = $('.filterform #id_filter_users');\n        var FilterActivity = $('.filterform #id_filter_activities');\n\n        return smartfilter = {\n            DurationFilter: function(value, reportdashboard) {\n                var today = new Date();\n                var endDate = today.getFullYear() + \"/\" + (today.getMonth() + 1) + \"/\" + today.getDate();\n                var start_duration = '';\n                if (value !== 'clear') {\n                    $('#ls_fenddate').val(today.getTime() / 1000);\n                    switch (value) {\n                        case 'week':\n                            start_duration = new Date(today.getFullYear(), today.getMonth(), today.getDate() - 7);\n                            break;\n                        case 'month':\n                            start_duration = new Date(today.getFullYear(), today.getMonth() - 1, today.getDate());\n                            break;\n                        case 'year':\n                            start_duration = new Date(today.getFullYear() - 1, today.getMonth(), today.getDate());\n                            break;\n                        case 'custom':\n                            $('#customrange').show();\n                            break;\n                        default:\n                            break;\n                    }\n                    if (start_duration != '') {\n                        $('#ls_fstartdate').val(start_duration.getTime() / 1000);\n                    }\n                } else {\n                    $('#ls_fenddate').val(\"\");\n                    $('#ls_fstartdate').val(\"\");\n                }\n                if (value !== 'custom') {\n                    var reportid = $('input[name=\"reportid\"]').val();\n                    if (reportdashboard != false) {\n                    \trequire(['block_learnerscript/reportwidget'], function(reportwidget) {\n                        \treportwidget.DashboardTiles();\n                        \treportwidget.DashboardWidgets();\n                    \t});\n                    } else {\n                    \trequire(['block_learnerscript/report'], function(report) {\n                        \treport.CreateReportPage({ reportid: reportid, instanceid: reportid, reportdashboard: reportdashboard });\n                        });\n                    }\n                    $('#customrange').val(\"\");\n                    $('#customrange').hide();\n                }\n                if (reportdashboard != true) {\n                    var reportid = $('input[name=\"reportid\"]').val();\n                    $('.plotgraphcontainer').removeClass('show').addClass('hide');\n                    $('#plotreportcontainer' + reportid).html('');\n                }\n\n            },\n            /**\n             * [FilterData description]\n             * @param {[type]} args [description]\n             */\n            FilterData: function(reportinstance) {\n                var reportfilter = $(\".filterform\" + reportinstance).serializeObject();\n                 $.urlParam = function(name){\n                    var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\n                    if (results === null || results == ' ' ){\n                       return null;\n                    } else{\n                       return results[1] || 0;\n                    }\n                }\n                var dashboardurl=$.urlParam('dashboardurl');\n                if(dashboardurl == 'Course'){\n                    var filter_courseid = $(\".report_courses\").val();\n                    reportfilter.filter_courses = filter_courseid;\n                }\n                return reportfilter;\n            },\n            BasicparamsData: function(reportinstance) {\n                var basicparams = $(\".basicparamsform\" + reportinstance).serializeObject();\n                return basicparams;\n            },\n            CourseData: function(args) {\n                var FirstElementActive = false;\n                if (BasicparamActivity.length > 0 || FilterActivity.length > 0) {\n                    if (BasicparamActivity.length > 0) {\n                        FirstElementActive = true;\n                    }\n                    if (args.courseid > 0) {\n                        this.CourseActivities({ courseid: args.courseid, firstelementactive: FirstElementActive, activityid: args.filterrequests.filter_activities });\n                    }\n                }\n                if (BasicparamUser.length > 0 || FilterUser.length > 0) {\n                    if (BasicparamUser.length > 0) {\n                        FirstElementActive = true;\n                    }\n                    // if (args.courseid > 0) {\n                        // this.EnrolledUsers({\n                        //     courseid: args.courseid,\n                        //     reportid: args.reportid,\n                        //     reporttype: args.reporttype,\n                        //     components: args.components,\n                        //     firstelementactive: FirstElementActive\n                        // });\n                    // }\n                }\n            },\n           categoryCourses: function(args) {\n            var currentcategory = $('#id_filter_coursecategories').find(\":selected\").val();\n            if (currentcategory > 0) {\n                var promise = ajax.call({\n                    args: {\n                        action: 'categorycourses',\n                        basicparam: true,\n                        reporttype: args.reporttype,\n                        categoryid: args.categoryid\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    var template = '';\n                    $.each(response, function(key, value) {\n                        template += '<option value = ' + key + '>' + value + '</option>';\n                    });\n                    $(\"#id_filter_courses\").html(template);\n                });\n            }\n        },\n        CourseActivities: function(args) {\n            var nearelement = args.element || $('#id_filter_activities');\n            activityid = parseInt(args.activityid) || 0;\n            var currentactivity = nearelement.val();\n            nearelement.find('option')\n                .remove()\n                .end()\n                .append('<option value=0>Select Activity</option>');\n            if (args.courseid >= 0) {\n                var promise = ajax.call({\n                    args: {\n                        action: 'courseactivities',\n                        basicparam: true,\n                        courseid: args.courseid\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    $.each(response, function(key, value) {\n                        key = parseInt(key);\n                        if(key == 0){\n                            return true;\n                        }\n                        // (key != currentactivity && key != 0)\n                        if (key != activityid) {\n                            nearelement.append($(\"<option></option>\")\n                                .attr(\"value\", key)\n                                .text(value));\n                        } else {\n                            nearelement.append($(\"<option></option>\")\n                                .attr(\"value\", key)\n                                .attr('selected', 'selected')\n                                .text(value));\n                        }\n                    });\n                    var currentactivity = $('.basicparamsform #id_filter_activities').find(\":selected\").val();\n                    if (currentactivity == 0 || currentactivity == null) {\n                        $('.basicparamsform #id_filter_activities').val($('.basicparamsform #id_filter_activities option:eq(1)').val());\n                    }\n                    var basicparamactivtylen = nearelement.parents('.basicparamsform').length;\n                    if (basicparamactivtylen > 0 && args.onloadtrigger) {\n                        $(\".basicparamsform #id_filter_apply\").trigger('click');\n                    }\n                });\n            }\n        },\n        UserCourses: function(args) {\n            var currentcourse = $('#id_filter_courses').find(\":selected\").val();\n            $('#id_filter_courses').find('option')\n                .remove()\n                .end()\n                .append('<option value=\"\">Select Course</option>');\n            if (args.userid >= 0) {\n                var promise = ajax.call({\n                    args: {\n                        action: 'usercourses',\n                        basicparam: true,\n                        userid: args.userid,\n                        reporttype: args.reporttype,\n                        reportid: args.reportid\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    $.each(response, function(key, value) {\n                        if(key == 0){\n                            return true;\n                        }\n                        if ((key == Object.keys(response)[0] && args.firstelementactive == 1) ||\n                                (key == currentcourse && args.firstelementactive == 1)) {\n                            $('#id_filter_courses').append($(\"<option></option>\")\n                                .attr(\"value\", key)\n                                .attr('selected', 'selected')\n                                .text(value));\n                            if(typeof args.triggercourseactivities != 'undefined' && args.triggercourseactivities == true){\n                                smartfilter.CourseActivities({ courseid: key });\n                            }\n                        } else {\n                            $('#id_filter_courses').append($(\"<option></option>\")\n                                .attr(\"value\", key)\n                                .text(value));\n                        }\n                    });\n\n                });\n            }\n        },\n        EnrolledUsers: function(args) {\n            var nearelement = args.element || $('#id_filter_users');\n            var currentuser = nearelement.val();\n            nearelement.find('option')\n                .remove()\n                .end()\n                .append('<option value=\"\">Select User</option>');\n                var promise = ajax.call({\n                    args: {\n                        action: 'enrolledusers',\n                        basicparam: true,\n                        reportid: args.reportid,\n                        courseid: args.courseid,\n                        reporttype: args.reporttype,\n                        component: args.components\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    // if (typeof nearelement == 'undefined') {\n                    //     nearelement.find('option')\n                    //         .not(':eq(0), :selected')\n                    //         .remove()\n                    //         .end();\n                    // }\n                    $.each(response, function(key, value) {\n                        if(key == 0){\n                            return true;\n                        }\n                        if (key != currentuser) {\n                            nearelement.append($(\"<option></option>\")\n                                .attr(\"value\", key)\n                                .text(value));\n                        } else {\n                            nearelement.append($(\"<option></option>\")\n                                .attr(\"value\", key)\n                                .attr('selected', 'selected')\n                                .text(value));\n                        }\n                    });\n                    if (!response.hasOwnProperty(currentuser)) {\n                        // nearelement.select2('destroy').select2({ theme: 'classic' });\n                        // nearelement.select2('val', 0);\n                    } else {\n                        nearelement.select2('val', \"\");\n                        var basicparamuserlen = nearelement.parents('.basicparamsform').length;\n                        if (basicparamuserlen > 0 && args.onloadtrigger) {\n                            $(\".basicparamsform #id_filter_apply\").trigger('click');\n                        }\n                    }\n                });\n\n        },\n        CohortUsers: function(args) {\n            var currentcohort = $('#id_filter_cohort').find(\":selected\").val();\n            if (currentcohort > 0) {\n                var promise = ajax.call({\n                    args: {\n                        action: 'cohortusers',\n                        basicparam: true,\n                        reporttype: args.reporttype,\n                        categoryid: args.cohortid\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    var template = '';\n                    $.each(response, function(key, value) {\n                        template += '<option value = ' + key + '>' + value + '</option>';\n                    });\n                    $(\"#id_filter_users\").html(template);\n                });\n            }\n        }\n        }\n    });"],"file":"smartfilter.min.js"}