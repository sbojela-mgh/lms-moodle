{"version":3,"sources":["../src/helper.js"],"names":["define","$","ajax","AjaxForms","Str","ModalFactory","ModalEvents","Ajax","notification","smartfilter","helper","sendmessage","args","username","get_strings","key","component","then","s","userid","reportinstance","formid","container","parents","length","append","dlg","dialog","resizable","autoOpen","width","title","modal","dialogClass","show","effect","duration","position","my","at","of","within","open","closest","find","removeClass","html","Closebutton","parent","attr","not","each","remove","close","submit","e","preventDefault","require","emptymessage","document","getElementById","value","url","imageUrl","hide","promise","call","methodname","messages","touserid","text","serializeObject","message","textformat","done","notifications","fail","ex","ViewReportFilters","activefilter","toggleClass","inactivefilter","deleteConfirm","create","type","types","SAVE_CANCEL","body","setSaveButtonText","getRoot","on","save","action","addClass","reportid","tabdata","cid","console","log","destroy","bind","validatebasicform","validate","getreport","index","selectedval","val","push","Preview","Select2Ajax","instanceid","data","courses","setminimumInputLength","hasClass","select2","params","dataaction","basicparamdata","JSON","stringify","BasicparamsData","fiterdata","FilterData","reportinstanceid","schuserslist","scheduleid","roleid","split","contextlevel","extend","methodname2","$blockname","transport","success","parseJSON","processResults","page","pagination","total_count","results","items","more","escapeMarkup","markup","minimumInputLength","maximumSelectionLength","language","maximumSelected","maximum","templateResult","repo","loading","templateSelection","id","element","form","dataset","window","location","M","cfg","wwwroot","getQueryParameters","str","search","replace","map","n","DrilldownReport","self","click","drillurl","indexOf","ReportModelFromLink","tableid","tablewidth","parseInt","drilldata","filter","reportwidget","CreateDashboardwidget","reporttype","basicparams","ls_fstartdate","ls_fenddate","now","chart","SparkLineReport","appendTo","prev","css","PlotForm","init","reportCalculations","get_string","title_img","util","image_url","ajaxStop","filters","filter_courses","response","reportname","table","dropdown","child","toggle","elements","notifytype","notify","tabsdraggable","sortable","cursor","axis","update","elementsorder","attribute","toString","rolesforcontext","template","end"],"mappings":"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","sourcesContent":["define(['jquery',\n        'block_learnerscript/ajax',\n        'block_learnerscript/ajaxforms',\n        'core/str',\n        'core/modal_factory',\n        'core/modal_events',\n        'core/ajax',\n        'core/notification',\n        'block_learnerscript/smartfilter',\n        'block_learnerscript/bootstrapnotify'\n    ],\n    function($, ajax, AjaxForms, Str, ModalFactory, ModalEvents, Ajax, notification, smartfilter) {\n        return helper = {\n            sendmessage: function(args, username) {\n                    Str.get_strings([{\n                    key: 'sendmessage',\n                    component: 'block_learnerscript'\n                }, {\n                    key: 'messageconformation',\n                    component: 'block_learnerscript'\n                }, {\n                    key: 'messagesent',\n                    component: 'block_learnerscript'\n                }]).then(function(s) {\n                var userid = args.userid;\n                var reportinstance = args.reportinstance;\n                var formid = \"form_sendsms\" + userid;\n                var container = $(\"#sendsms_\" + reportinstance + '_' + userid).parents('table');\n                if ($('#ls_sendsms_' + reportinstance + '_' + userid).length < 1) {\n                    $(\"#sendsms_\" + reportinstance + '_' + userid).append('<div id=\"ls_sendsms_' + reportinstance + '_' + userid + '\" class=\"sendmessage\"><div class=\"messageloading\"></div><form id=\"' + formid + '\" ><textarea id=\"text_' + formid + '\" type=\"text\" name=\"message\"></textarea><input type=\"submit\" value = \"Submit\"></form></div>');\n                }\n                var dlg = $('#ls_sendsms_' + reportinstance + '_' + userid).dialog({\n                    resizable: true,\n                    autoOpen: false,\n                    width: \"20%\",\n                    title: s[0],\n                    modal: false,\n                    dialogClass: 'sendsmsdialog',\n                    show: {\n                        effect: \"slide\",\n                        duration: 1000\n                    },\n                    position: {\n                        my: \"left\",\n                        at: \"right\",\n                        of: \"#sendsms_\" + reportinstance + '_' + userid,\n                        within: container\n                    },\n                    open: function(event, ui) {\n                        $(this).closest(\".ui-dialog\")\n                            .find(\".ui-dialog-titlebar-close\")\n                            .removeClass(\"ui-dialog-titlebar-close\")\n                            .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                            var Closebutton = $('.ui-icon-closethick').parent();\n                            $(Closebutton).attr({\n                                \"title\" : \"Close\"\n                            });\n                        $(\".sendmessage\").not(this).each(function() {\n                            $(this).remove();\n                        });\n                    },\n                    close: function(event, ui) {\n                        $(this).dialog('destroy').remove();\n                    }\n                });\n                dlg.dialog(\"open\");\n                $(\"#\" + formid).submit(function(e) {\n                    e.preventDefault();\n                    var helper = require('block_learnerscript/helper');\n                    var emptymessage = document.getElementById(\"text_\" + formid).value;\n                    if (!emptymessage) {\n                        $('.messageloading').html('<div class=\"alert alert-danger\">You must supply a value here</div>');\n                    } else {\n                        url = require('core/url');\n                        $('.messageloading').html('<center><img src=\"' + url.imageUrl(\"loader\", \"block_learnerscript\") + '\" alt=\"Message Sending\" title=\"Message Sending\"/></center>');\n                        $(\"#\" + formid).hide();\n                        var promise = Ajax.call([{\n                            methodname: 'core_message_send_instant_messages',\n                            args: {\n                                messages: [{\n                                    touserid: args.userid,\n                                    text: $(\"#\" + formid).serializeObject().message,\n                                    textformat: 0\n                                }]\n                            }\n                        }]);\n                    }\n                    promise[0].done(function(response) {\n                        var message = s[2] + username\n                        helper.notifications(message);\n                        dlg.dialog(\"close\");\n                    }).fail(function(ex) {\n                        // do something with the exception\n                        //  console.log(ex);\n                        $('.messageloading').html('<div class=\"alert alert-warning\">' + ex.message + '</div>');\n                        // $(\"#\"+formid).show();\n                    });\n                })\n            });\n            },\n            ViewReportFilters: function(args) {\n                $('.' + args.activefilter).toggleClass(\"show\");\n                $('.' + args.inactivefilter).removeClass(\"show\");\n            },\n            deleteConfirm: function(args) {\n                // var action = $(elem).data('action');\n                return Str.get_strings([{\n                    key: 'deleteconfirmation',\n                    component: 'block_learnerscript'\n                }, {\n                    key: 'deleteallconfirm',\n                    component: 'block_learnerscript'\n                },{\n                    key:'graphdeleted',\n                    component:'block_learnerscript'\n                },{\n                    key:'graphcannotbedeleted',\n                    component:'block_learnerscript'\n                }]).then(function(s) {\n                    ModalFactory.create({\n                        title: s[0],\n                        type: ModalFactory.types.SAVE_CANCEL,\n                        body: s[1]\n                    }).done(function(modal) {\n                        this.modal = modal;\n                        modal.setSaveButtonText('Confirm');\n                        modal.getRoot().on(ModalEvents.save, function(e) {\n                            e.preventDefault();\n                            var helper = require('block_learnerscript/helper');\n                            var promise = Ajax.call([{\n                                methodname: 'block_learnerscript_' + args.action,\n                                args: args\n                            }]);\n                            promise[0].done(function(resp) {\n                                $('.plotgraphcontainer').removeClass('show').addClass('hide');\n                                $('#plotreportcontainer' + args.reportid).html('');\n\n                                // var activetab = $( \"#report_plottabs\" ).tabs( \"option\", \"active\" );\n                                // var activetabid = $( \"#report_plottabs li:eq(\" + activetab + \")\" ).data('cid');\n                                var tabdata = $('#' + args.cid).attr('aria-controls');\n                                $(\"[data-cid='\" + args.cid + \"']\").remove();\n                                $('#' + tabdata).remove();\n                                // $('#report_plottabs').tabs('destroy').tabs();\n                                // $('#report_plottabs').tabs( \"refresh\" );\n                                // if ($( \"#report_plottabs li:eq(0) a\" ).length > 0) {\n                                //     $( \"#report_plottabs li:eq(0) a\" ).trigger('click');\n                                // } else\n                                if ($( \"#report_plottabs li:eq(0) a\" ).length < 1) {\n                                    $('#report_plottabs').remove();\n                                }\n\n                                helper.notifications(s[2]);\n                                // window.location.href = window.location.href;\n                            }).fail(function(ex) {\n                                // do something with the exception\n                                console.log(ex);\n                            });\n                            modal.hide();\n                            modal.destroy();\n                        }.bind(this));\n                        modal.show();\n                        $('.modal-header button.close').attr('title','Close');\n                    }.bind(this));\n                }.bind(this));\n            },\n            validatebasicform: function(validate) {\n                var getreport = [];\n                if (typeof validate == 'undefined') {\n                    $.each($('.basicparamsform select'), function(index, value) {\n                        var selectedval = $(value).val();\n                        if (selectedval == 0) {\n                            getreport.push(0);\n                        }\n                    });\n                }\n                return getreport;\n            },\n            Preview: function(args) {\n                $(args.container).dialog({\n                    dialogClass: 'previewpopup',\n                    width: '95%',\n                    modal: true,\n                    position: {\n                        my: 'center',\n                        at: 'center',\n                        within: '.ls_components'\n                        //of: 'body'\n                    },\n                    close: function() {\n                        $(this).dialog('destroy');\n                    },\n                    open: function() {\n                        $(this).closest(\".ui-dialog\")\n                            .find(\".ui-dialog-titlebar-close\")\n                            .removeClass(\"ui-dialog-titlebar-close\")\n                            .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                            var Closebutton = $('.ui-icon-closethick').parent();\n                            $(Closebutton).attr({\n                                \"title\" : \"Close\"\n                            });\n                        // $(this).closest(\".ui-dialog\")\n                        //     .find('.ui-dialog-title').html(title_img + self.args.title);\n                    }\n                });\n            },\n            /**\n             * Central method for call Select2 with Ajax in reports module\n             * @param object args Object with reportID and other required params\n             */\n            Select2Ajax: function(args) {\n                $(\"select[data-select2-ajax='1']\").each(function() {\n                    var instanceid = $(this).data('instanceid');\n                    var reportinstance = instanceid ? instanceid : args.reportid;\n                    if (args.action == 'rolewiseusers') {\n                        args.reportid = $(this).data('reportid');\n                        args.courses =  $('[name=\"filter_courses\"]').val();\n                    }\n                    if (args.action === 'userlist') {\n                        args.setminimumInputLength = 2;\n                        args.courses =  $('[name=\"filter_courses\"]').val();\n                    }\n                    if (!$(this).hasClass('select2-hidden-accessible')) {\n                        $(this).select2({\n                            // multiple: args.multiple || false,\n                            ajax: {\n                                data: function(params) {\n                                    var dataaction = $(this).data('action');\n\n                                    if (dataaction == 'filterusers' || dataaction == 'filtercourses') {\n                                        args.action = dataaction;\n                                        args.basicparamdata = JSON.stringify(smartfilter.BasicparamsData(reportinstance));\n                                        args.fiterdata = JSON.stringify(smartfilter.FilterData(reportinstance));\n                                        args.reportinstanceid = instanceid;\n                                        args.courses = $('[name=\"filter_courses\"]').val();\n\n                                    }\n                                    if (args.action == 'rolewiseusers') {\n                                        delete args.schuserslist;\n                                        delete args.scheduleid;\n                                        args.roleid = $(\"#id_role\" + reportinstance).val();\n                                        var roleid = args.roleid.split('_');\n                                        args.roleid = roleid[0];\n                                        args.contextlevel = roleid[1];\n                                        args.courses = $('[name=\"filter_courses\"]').val();\n\n                                    }\n                                    $.extend(params, args);\n                                    methodname2 = args.action;\n                                    if (methodname2 === 'userlist') {\n                                        $blockname = 'block_reportdashboard_';\n                                    } else {\n                                        $blockname = 'block_learnerscript_';\n                                    }\n\n                                    return params;\n                                },\n                                transport: function(params, success, failure) {\n                                    params.data.roleid = params.data.roleid;\n                                    var promise = Ajax.call([{\n                                        methodname: $blockname + methodname2,\n                                        args: params.data\n                                    }]);\n                                    promise[0].done(function(data) {\n                                        data = $.parseJSON(data);\n                                        success(data);\n                                    });\n                                    promise[0].fail(function(failure) {\n                                        // do something with the exception\n                                        //  console.log(failure);\n                                    });\n                                },\n                                processResults: function(data, params) {\n                                    // parse the results into the format expected by Select2\n                                    // since we are using custom formatting functions we do not need to\n                                    // alter the remote JSON data, except to indicate that infinite\n                                    // scrolling can be used\n                                    params.page = params.page || 1;\n                                    var pagination = false;\n                                    if (args.action === 'userlist' || args.action == 'filtercourses' || args.action == 'filterusers') {\n                                        pagination = false;\n                                    } else {\n                                        pagination = (params.page * 10) < data.total_count;\n                                    }\n                                    return {\n                                        results: data.items,\n                                        pagination: {\n                                                more: pagination\n                                        }\n                                    };\n                                }\n                            },\n                            escapeMarkup: function(markup) {\n                                return markup;\n                            }, // let our custom formatter work\n                            minimumInputLength: args.setminimumInputLength || 1,\n                            maximumSelectionLength: args.maximumSelectionLength,\n                            language: {\n                                // You can find all of the options in the language files provided in the\n                                // build. They all must be functions that return the string that should be\n                                // displayed.\n                                maximumSelected: function(params) {\n                                    if (args.action == 'rolewiseusers') {\n                                        args.roleid = $(\"#id_role\" + reportinstance).val();\n                                        args.schuserslist = $('#schuserslist' + reportinstance).val();\n                                        args.scheduleid = $(\"#scheduleid\").val() || -1;\n                                        return \"Click <a href='javascript:void(0);' class='seluser' id='addusers\" + args.reportid + \"' \\\n                                                     data-reportid=\" + args.reportid + \" data-scheduleid = \" + args.scheduleid + \" \\\n                        onclick = '(function(e){ require(\\\"block_learnerscript/schedule\\\").manageschusers(\\\n                                                     {reportinstance:\" + reportinstance + \", reportid:\" + args.reportid + \",scheduleid:\" + args.scheduleid + \",selectedroleid:\" + args.roleid + \",\\\n                                                     schuserslist:\\\"\" + args.schuserslist + \"\\\"}) })(event)' > here </a> to add more than \" + params.maximum + \" users.\";\n                                    }\n                                }\n                            },\n                            templateResult: function formatRepo(repo) {\n                                var markup;\n                                if (repo.loading) {\n                                    return repo.text || \"Values not supported\";\n                                }\n                                markup = repo.text || \"Values not supported\";\n                                return markup;\n                            }, // omitted for brevity, see the source of this page\n                            templateSelection: function formatRepoSelection(repo) {\n                                var markup;\n                                if (repo.id == -1 && args.action == 'rolewiseusers') {\n                                    var reportid = repo.element.form.dataset.reportid || 0;\n                                    var scheduleid = repo.element.form.dataset.scheduleid || -1;\n                                    markup = \"<a href='javascript:void(0)' class='viewschusers'\" +\n                                        \"onclick='(function(e){ require(\\\"block_learnerscript/schedule\\\").viewschusers( \\\n                                            {reportid:\" + reportid + \",scheduleid:\" + scheduleid + \", reportinstance:\" + reportinstance + \"}) })(event);'>\" + repo.text + \"</a>\";\n                                } else {\n                                    markup = repo.text;\n                                }\n                                return markup;\n                            } // omitted for brevity, see the source of this page\n                        }).on('select2:select', function(evt) {\n                            if (args.action == 'reportlist') {\n                                var reportid = $(this).val();\n                                window.location = M.cfg.wwwroot + '/blocks/learnerscript/viewreport.php?id=' + reportid;\n                            }\n                        });\n                    }\n                });\n            },\n            getQueryParameters: function(str) {\n                return (str || document.location.search).replace(/(\\?)/, '&').split(\"&\").map(function(n) { return n = n.split(\"=\"), this[n[0]] = n[1], this }.bind({}))[0];\n            },\n            DrilldownReport: function() {\n                var self = this;\n                //Drill down report\n                $('td a').click(function(e) {\n                    var url = $(this).attr('href');\n                    var drillurl = self.getQueryParameters(url);\n                    if (url.indexOf('viewreport.php') <= 0 || \"download\" in drillurl) {\n                        return;\n                    }\n                    e.preventDefault();\n                    self.ReportModelFromLink({ container: $(this), url: url });\n\n                });\n            },\n            ReportModelFromLink: function(args) {\n                var tableid = args.container.parents().closest('table').attr('id');\n                var tablewidth = $(\"#\" + tableid + \"\").width();\n                var drillurl = this.getQueryParameters(args.url);\n                var reportid = parseInt(drillurl.id);\n                var drilldata = $(this).data();\n                var filter = {};\n                if (args.url.indexOf('viewreport.php') <= 0 || \"download\" in drillurl) {\n                    return;\n                }\n                $.each(drillurl, function(key, val) {\n                    if (key.indexOf('filter') >= 0) {\n                        filter[key] = val;\n                    }\n                });\n                if ($(\"#reportcontainer\" + reportid).length == 0) {\n                    $('body').append('<div id=\"reportcontainer' + reportid + '\" style=\"display:none;\"></div>');\n                    reportwidget.CreateDashboardwidget({\n                        reportid: reportid,\n                        reporttype: 'table',\n                        basicparams: JSON.stringify(filter),\n                        ls_fstartdate: 0,\n                        ls_fenddate: $.now()\n                    });\n                    chart.SparkLineReport();\n                }\n                var dlg = $(\"#reportcontainer\" + reportid + \"\").dialog({\n                    resizable: true,\n                    autoOpen: false,\n                    dialogClass: \"drilldown\" + reportid,\n                    width: tablewidth,\n                    title: '',\n                    appendTo: \"#\" + tableid,\n                    modal: true,\n                    position: {\n                        my: \"center\",\n                        at: \"top\",\n                        of: \"#\" + tableid\n                    },\n                    open: function(event) {\n                        $(this).closest(\".ui-dialog\")\n                            .find(\".ui-dialog-titlebar-close\")\n                            .removeClass(\"ui-dialog-titlebar-close\")\n                            .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                            var Closebutton = $('.ui-icon-closethick').parent();\n                            $(Closebutton).attr({\n                                \"title\" : \"Close\"\n                            });\n                        $(\".drilldown\" + reportid).append('<a href=' + args.url + '><span class=\"reportdashboard_right\">View more</span></a>');\n                    },\n                    close: function(event, ui) {\n                        $(this).dialog('destroy').remove();\n                    }\n                });\n                dlg.dialog(\"open\").prev(\".ui-dialog-titlebar\").css(\"color\", \"#0C75B6\");\n            },\n            PlotForm: function(args) {\n                url = M.cfg.wwwroot + '/blocks/learnerscript/ajax.php';\n                args.title = (!args.title) ? 'Plot Graph' : args.title;\n                AjaxForms.init(args, url);\n            },\n            reportCalculations: function(args) {\n                Str.get_string('calcs','block_learnerscript').then(function(s) {\n                var title_img = \"<img class='dialog_title_icon' alt='Calculations' src='\" +\n                    M.util.image_url(\"schedule_icon\", \"block_learnerscript\") + \"'/>\";\n                var dlg = $(\".reportcalculation\" + args.reportid).dialog({\n                    dialogClass: 'calculationspopup',\n                    resizable: false,\n                    autoOpen: false,\n                    width: \"50%\",\n                    title: 'Calculations',\n                    modal: true,\n                    position: {\n                        my: \"center\",\n                        at: \"center\",\n                        of: window\n                    },\n                    open: function(event, ui) {\n                        $(\".reportcalculation\" + args.reportid).append('<img src=\"' + M.util.image_url('loading', 'block_learnerscript') + '\" id=\"loadingimage\" />');\n                        $(document).ajaxStop(function() {\n                            $(\"#loadingimage\").remove();\n                        });\n                        $(this).closest(\".ui-dialog\").find(\".ui-dialog-titlebar-close\")\n                            .removeClass(\"ui-dialog-titlebar-close\")\n                            .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\n                            var Closebutton = $('.ui-icon-closethick').parent();\n                            $(Closebutton).attr({\n                                \"title\" : \"Close\"\n                            });\n                        $(this).closest(\".ui-dialog\").find('.ui-dialog-title')\n                            .html('Calculations');\n                    }\n\n                });\n                args.filters = smartfilter.FilterData(args.reportid);\n                args.filters['ls_fstartdate'] = $('#ls_fstartdate').val();\n                args.filters['ls_fenddate'] = $('#ls_fenddate').val();\n                if (typeof args.filters['filter_courses'] == 'undefined') {\n                    var filter_courses = $('#ls_courseid').val();\n                    if (filter_courses != 1) {\n                        args.filters['filter_courses'] = filter_courses;\n                    }\n                }\n                args.filters = JSON.stringify(args.filters);\n\n                args.action = 'reportcalculations';\n\n                args.basicparams = args.basicparams || JSON.stringify(smartfilter.BasicparamsData(args.reportid));\n                var promise = ajax.call({\n                    args: args,\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\"\n                });\n                promise.done(function(response) {\n                    $(\".reportcalculation\" + args.reportid).closest(\".ui-dialog\").find('.ui-dialog-title')\n                        .html(response.reportname + ' : Calculations');\n                    $(\".reportcalculation\" + args.reportid).html(response.table);\n                }).fail(function(ex) {\n                    // do something with the exception\n                    //  console.log(ex);\n                });\n                dlg.dialog(\"open\");\n                }.bind(this));\n            },\n            dropdown: function(child) {\n                $('#' + child).toggle();\n            },\n            notifications: function(elements, notifytype){\n                notifytype = notifytype || 'success';\n                $.notify({\n                    message: elements\n                },{\n                    type: notifytype\n                }\n                );\n            },\n            tabsdraggable: function($tabs) {\n                $( \".ls-plotgraphs_list\" ).sortable({\n                    cursor: 'move',\n                    axis: 'y',\n                    update: function (event, ui) {\n                        var elementsorder = $('.ls-plotgraphs_list').sortable('toArray', {attribute: 'data-cid'}).toString();\n                        var promise = ajax.call({\n                            args: {\n                                action: 'tabsposition',\n                                reportid: $('.ls-plotgraphs_list').data('reportid'),\n                                component: 'plot',\n                                elementsorder: elementsorder\n                            },\n                            url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\"\n                        });\n                    }\n                });\n            },\n            rolesforcontext: function(contextlevel, reportid){\n                var promise = ajax.call({\n                    args: {\n                        action: 'contextroles',\n                        contextlevel: contextlevel,\n                        reportid: reportid\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    var template = '';\n                    $.each(response, function(key, value) {\n                        template += '<option value = ' + key + '>' + value + '</option>';\n                    });\n                    $(\"#id_roleid\").find('option').remove().end().append(template);\n                });\n            }\n        }\n    });"],"file":"helper.min.js"}