{"version":3,"sources":["../src/report.js"],"names":["define","select2","DataTable","reportwidget","chart","smartfilter","helper","AjaxForms","ajax","$","RadiosToSlider","flatpickr","templates","report","BasicparamCourse","BasicparamUser","BasicparamActivity","FilterCourse","FilterUser","FilterActivity","FilterModule","FilterCohort","NumberOfBasicParams","init","args","ui","dialog","prototype","_focusTabbable","noop","fn","dataTable","ext","errMode","on","reportid","data","removeClass","addClass","html","theme","e","val","length","preventDefault","trigger","change","find","window","location","M","cfg","wwwroot","size","animation","reportdashboard","mode","onOpen","selectedDates","dateStr","instance","clear","onClose","getTime","require","CreateReportPage","instanceid","cohortid","FirstElementActive","CohortUsers","reporttype","firstelementactive","courseid","CourseData","userid","categoryid","categoryCourses","schedule","SelectRoleUsers","basicparams","name","hide","attr","click","parent","CourseActivities","document","ajaxComplete","reset","validate","getreport","validatebasicform","stopImmediatePropagation","show","currentTarget","value","removeAttr","inArray","event","xhr","settings","url","indexOf","ajaxaction","parseJSON","basicparam","action","disabletable","HighchartsAjax","cols","CreateDashboardwidget","generate_plotgraph","response","containerid","reportinstance","type","piechart","lbchart","solidgauge","combinationchart","WorldMap","TreeMap","ReportDatatable","self","params","filters","JSON","stringify","BasicparamsData","columns","pipeline","opts","conf","extend","method","request","drawCallback","requestStart","start","drawStart","requestLength","draw","json","splice","jqXHR","reportname","lengthoptions","sesskey","columnDefs","SparkLineReport","DrilldownReport","fnAdjustColumnSizing","remove","each","link","basicparamsdata","parse","key","nRow","children","index","td","css","wrap","width","util","image_url","AddExpressions","target","id","column","conditionsymbols","push","render","then","append","fail","block_statistics_help","promise","call","done","ModalFactory","create","title","body","summary","footer","modal","dialogue","ModalEvents","getRoot","hidden"],"mappings":"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","sourcesContent":["/**\n * Standard Report wrapper for Moodle. It calls the central JS file for Report plugin,\n * Also it includes JS libraries like Select2,Datatables and Highcharts\n * @module     block_learnerscript/report\n * @class      report\n * @package    block_learnerscript\n * @copyright  2017 Naveen kumar <naveen@eabyas.in>\n * @since      3.3\n */\ndefine(['block_learnerscript/select2',\n    'block_learnerscript/responsive.bootstrap',\n    'block_learnerscript/reportwidget',\n    'block_learnerscript/chart',\n    'block_learnerscript/smartfilter',\n    'block_learnerscript/helper',\n    'block_learnerscript/ajaxforms',\n    'block_learnerscript/ajax',\n    'jquery',\n    'block_learnerscript/radioslider',\n    'block_learnerscript/flatpickr',\n    'core/templates',\n    'jqueryui'\n], function(select2, DataTable, reportwidget, chart, smartfilter, helper, AjaxForms, ajax,\n    $, RadiosToSlider, flatpickr, templates) {\n    var report;\n    var BasicparamCourse = $('.basicparamsform #id_filter_courses');\n    var BasicparamUser = $('.basicparamsform #id_filter_users');\n    var BasicparamActivity = $('.basicparamsform #id_filter_activities');\n\n    var FilterCourse = $('.filterform #id_filter_courses');\n    var FilterUser = $('.filterform #id_filter_users');\n    var FilterActivity = $('.filterform #id_filter_activities');\n    var FilterModule = $('.filterform #id_filter_modules');\n    var FilterCohort = $('.filterform #id_filter_cohort');\n\n    var NumberOfBasicParams = 0;\n\n    return report = {\n        init: function(args) {\n            /**\n             * Initialization\n             */\n            $.ui.dialog.prototype._focusTabbable = $.noop;\n            $.fn.dataTable.ext.errMode = 'none';\n\n            $('.plotgraphcontainer').on('click', function() {\n                var reportid = $(this).data('reportid');\n                // $(this).removeClass('show').addClass('show');\n                $('.plotgraphcontainer').removeClass('show').addClass('hide');\n                $('#plotreportcontainer' + reportid).html('');\n\n            })\n            /**\n             * Select2 initialization\n             */\n            $(\"select[data-select2='1']\").select2({\n                theme: \"classic\"\n            }).on(\"select2:selecting\", function(e) {\n                if ($(this).val() && $(this).data('maximumSelectionLength') &&\n                    $(this).val().length >= $(this).data('maximumSelectionLength')) {\n                    e.preventDefault();\n                    $(this).select2('close');\n                }\n            });\n\n            /*\n             * Report search\n             */\n            $(\"#reportsearch\").val(args.reportid).trigger('change.select2');\n            $(\"#reportsearch\").change(function() {\n                var reportid = $(this).find(\":selected\").val();\n                window.location = M.cfg.wwwroot + '/blocks/learnerscript/viewreport.php?id=' + reportid;\n            });\n            /**\n             * Duration buttons\n             */\n            RadiosToSlider.init($('#segmented-button'), {\n                size: 'medium',\n                animation: true,\n                reportdashboard: false\n            });\n            /**\n             * Duration Filter\n             */\n            flatpickr('#customrange', {\n                mode: 'range',\n                onOpen: function(selectedDates, dateStr,instance){\n                    instance.clear();\n                },\n                onClose: function(selectedDates, dateStr, instance) {\n                    if(selectedDates.length !== 0){\n                        $('#ls_fstartdate').val(selectedDates[0].getTime() / 1000);\n                        $('#ls_fenddate').val((selectedDates[1].getTime() / 1000) + (60 * 60 * 24));\n                        require(['block_learnerscript/report'], function(report) {\n                            report.CreateReportPage({ reportid: args.reportid, instanceid: args.reportid, reportdashboard: false });\n                        });\n                    }\n                }\n            });\n            /*\n             * Get users for selected course \n             */\n            $('#id_filter_cohort').change(function() {\n                var cohortid = $(this).find(\":selected\").val();\n                if (cohortid > 0 && (FilterUser.length > 0 || BasicparamUser.length > 0)) {\n                    if(BasicparamUser.length > 0){\n                        FirstElementActive = true;\n                    }\n                    smartfilter.CohortUsers({ cohortid: cohortid, reporttype: args.reporttype, reportid: args.reportid, \n                                              firstelementactive: FirstElementActive});\n                }\n            });\n\n            /*\n             * Get Activities and Enrolled users for selected course\n             */\n            if (typeof BasicparamCourse != 'undefined' || typeof FilterCourse != 'undefined') {\n                $('#id_filter_courses').change(function() {\n                    args.courseid = $(this).find(\":selected\").val();\n                    smartfilter.CourseData(args);\n                });\n            }\n\n            /*\n             * Get Enrolled courses for selected user\n             */\n            $('#id_filter_users').change(function() {\n                var userid = $(this).find(\":selected\").val();\n                if (userid > 0 && (FilterCourse.length > 0 || BasicparamCourse.length > 0)) {\n                    if(BasicparamCourse.length > 0){\n                        FirstElementActive = true;\n                    }\n                    // smartfilter.UserCourses({ userid: userid, reporttype: args.reporttype, reportid: args.reportid, \n                    //                           firstelementactive: FirstElementActive, triggercourseactivities: true });\n                }\n            });\n\n            $('#id_filter_coursecategories').change(function() {\n                var categoryid = $(this).find(\":selected\").val();\n                smartfilter.categoryCourses({ categoryid: categoryid, reporttype: args.reporttype });\n            });\n\n            schedule.SelectRoleUsers();\n\n            if (args.basicparams != null) {\n                if (args.basicparams[0].name == 'courses') {\n                    $(\"#id_filter_courses\").trigger('change');\n                    NumberOfBasicParams++;\n                }\n            }\n            if (args.basicparams != null) {\n                var FirstElementActive = false;\n                if (args.basicparams[0].name == 'users') {\n                    if (BasicparamCourse.length > 0) {\n                        FirstElementActive = true;\n                    }\n                    var userid = $(\"#id_filter_users\").find(\":selected\").val();\n                    if (userid > 0) {\n                        //args.courseid = $(this).find(\":selected\").val();\n                        args.courseid = $('#id_filter_courses').find(\":selected\").val();\n                        smartfilter.CourseData(args);\n                        // smartfilter.UserCourses({ userid: userid, reportid: args.reportid, reporttype: args.reporttype,\n                        //                           firstelementactive: FirstElementActive, triggercourseactivities: true });\n                    }\n                }\n            }\n\n            //For forms formatting..can't make unique everywhere, so little trick ;)\n            $('.filterform' + args.reportid + ' .fitemtitle').hide();\n            $('.filterform' + args.reportid + ' .felement').attr('style', 'margin:0');\n\n            $('.basicparamsform' + args.reportid + ' .fitemtitle').hide();\n            $('.basicparamsform' + args.reportid + ' .felement').attr('style', 'margin:0');\n\n            /*\n             * Filter form submission\n             */\n            $(\".filterform #id_filter_clear\").click(function(e) {\n                var NumberOfBasicParams = 0;\n                $(\".filterform\" + args.reportid).trigger(\"reset\");\n                var activityelement = $(this).parent().find('#id_filter_activities');\n                if (FilterUser.length > 0) {\n                    if (FilterCourse.length > 0 || BasicparamCourse.length > 0) {\n                        if(BasicparamCourse.length > 0){\n                            FirstElementActive = true;\n                        }\n                        // smartfilter.UserCourses({ userid: 0, reportid: args.reportid, reporttype: args.reporttype, firstelementactive: FirstElementActive });\n                    }\n                    // $(\"select[data-select2='1']\").select2(\"destroy\").select2({ theme: \"classic\" });\n                }\n                if (FilterCourse.length > 0) {\n                    if (FilterUser.length > 0 || BasicparamUser.length > 0) {\n                        // smartfilter.EnrolledUsers({ courseid: 0, reportid: args.reportid, reporttype: args.reporttype, components: args.components });\n                    }\n\n                    if (FilterActivity.length > 0 || BasicparamActivity.length > 0) {\n                        smartfilter.CourseActivities({ courseid: 0 });\n                    }\n                    // $(\"select[data-select2='1']\").select2(\"destroy\").select2({ theme: \"classic\" });\n                }\n                if (FilterActivity.length > 0 || FilterModule.length > 0) {\n                    if ((FilterCourse.length > 0 || BasicparamCourse.length > 0) && BasicparamUser.length == 0) {\n                        if(BasicparamCourse.length > 0 && BasicparamUser.length == 0){\n                            FirstElementActive = true;\n                        }\n                        // smartfilter.UserCourses({ userid: 0, reportid: args.reportid, reporttype: args.reporttype, firstelementactive: FirstElementActive });\n                    }\n                    if (BasicparamCourse.length > 0 && BasicparamUser.length > 0) {\n                            $(\".basicparamsform #id_filter_apply\").trigger('click', [true]);\n                    }\n                    // $(\"select[data-select2='1']\").select2(\"destroy\").select2({ theme: \"classic\" });\n                }\n                if (FilterCohort.length > 0) {\n                    if (FilterUser.length > 0) {\n                        smartfilter.CohortUsers({ cohortid: 0});\n                    }\n                }\n\n                if ($(\".basicparamsform #id_filter_apply\").length > 0) {\n                    $(document).ajaxComplete(function(event, xhr, settings) {\n                        // if (settings.url.indexOf(\"blocks/learnerscript/ajax.php\") > 0) {\n                        //     if (typeof settings.data != 'undefined') {\n                        //         var ajaxaction = $.parseJSON(settings.data);\n                        //         if (typeof ajaxaction.basicparam != 'undefined' && ajaxaction.basicparam == true) {\n                        //             NumberOfBasicParams++;\n                        //         }\n                        //     }\n                        //     if (args.basicparams.length == NumberOfBasicParams) {\n                        //         $(\".basicparamsform #id_filter_apply\").trigger('click', [true]);\n                        //     }\n                        // }\n                    });\n                    $(\".basicparamsform #id_filter_apply\").trigger('click', [true]);\n                } else {\n                    args.reporttype = $('.ls-plotgraphs_listitem.ui-tabs-active').data('cid');\n                    report.CreateReportPage({ reportid: args.reportid, reporttype: args.reporttype, instanceid: args.reportid });\n                }\n                $(\".filterform select[data-select2='1']\").select2(\"destroy\").select2({ theme: \"classic\" });\n                $(\".filterform select[data-select2-ajax='1']\").val('0').trigger('change');\n                $('.filterform')[0].reset();\n                $(\".filterform #id_filter_clear\").attr('disabled', 'disabled');\n                $('.plotgraphcontainer').removeClass('show').addClass('hide');\n                $('#plotreportcontainer' + args.instanceid).html('');\n            });\n\n            /*\n             * Basic parameters form submission\n             */\n            $(\".basicparamsform #id_filter_apply,.filterform #id_filter_apply\").click(function(e, validate) {\n                var getreport = helper.validatebasicform(validate);\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                $(\".filterform\" + args.reportid).show();\n                args.instanceid = args.reportid;\n                if(e.currentTarget.value != 'Get Report'){\n                    $(\".filterform #id_filter_clear\").removeAttr('disabled');\n                }\n                if ($.inArray(0, getreport) != -1) {\n                    $(\"#report_plottabs\").hide();\n                    $(\"#reportcontainer\" + args.reportid).html(\"<div class='alert alert-info'>No data available</div>\");\n                } else {\n                    $(\"#report_plottabs\").show();\n                    args.reporttype = $('.ls-plotgraphs_listitem.ui-tabs-active').data('cid');\n                    report.CreateReportPage({ reportid: args.reportid, reporttype: args.reporttype, instanceid: args.instanceid, reportdashboard: false });\n                }\n                $('.plotgraphcontainer').removeClass('show').addClass('hide');\n                $('#plotreportcontainer' + args.instanceid).html('');\n            });\n            /*\n             * Generate Plotgraph\n             */\n            if (args.basicparams == null) {\n                report.CreateReportPage({ reportid: args.reportid, reporttype: args.reporttype, instanceid: args.reportid, reportdashboard: false });\n            } else {\n                if (args.basicparams.length <= 4) {\n                    $(\".basicparamsform #id_filter_apply\").trigger('click', [true]);\n                } else {\n                        $(document).ajaxComplete(function(event, xhr, settings) {\n                            if (settings.url.indexOf(\"blocks/learnerscript/ajax.php\") > 0) {\n                                if (typeof settings.data != 'undefined') {\n                                    var ajaxaction = $.parseJSON(settings.data);\n                                    if (typeof ajaxaction.basicparam != 'undefined' && ajaxaction.basicparam == true) {\n                                        NumberOfBasicParams++;\n                                    }\n                                }\n                                if (args.basicparams.length == NumberOfBasicParams\n                                    && ajaxaction.action != 'plotforms' && ajaxaction.action != 'pluginlicence') {\n                                    $(\".basicparamsform #id_filter_apply\").trigger('click', [true]);\n                                }\n                            }\n                        });\n                }\n            }\n\n            /*\n             * Make sure will have vertical tabs for plotoptions for report\n             */\n            // $tabs = $('#report_plottabs').tabs().addClass(\"ui-tabs-vertical ui-helper-clearfix\");\n            // $(\"#report_plottabs li\").removeClass(\"ui-corner-top\").addClass(\"ui-corner-left\");\n\n            // helper.tabsdraggable($tabs);\n\n        },\n        CreateReportPage: function(args) {\n            var disabletable = 0;\n            if (args.reportdashboard == false) {\n                var disabletable = $('#disabletable').val();\n                if (disabletable) {\n                    args.reporttype = $($('.ls-plotgraphs_listitem')[0]).data('cid');\n                }\n            }\n            if (disabletable == 1 && args.reporttype.length > 0) {\n                chart.HighchartsAjax({\n                    'reportid': args.reportid,\n                    'action': 'generate_plotgraph',\n                    'cols': args.cols,\n                    'reporttype': args.reporttype\n                });\n            } else if (disabletable == 0) {\n                reportwidget.CreateDashboardwidget({\n                    reportid: args.reportid,\n                    reporttype: 'table',\n                    instanceid: args.reportid,\n                    reportdashboard: args.reportdashboard\n                });\n            } else {\n\n            }\n        },\n        /**\n         * Generates graph widget with given Highcharts ajax response\n         * @param  object response Ajax response\n         * @return Creates highchart widget with given response based on type of chart\n         */\n        generate_plotgraph: function(response) {\n            var returned;\n            response.containerid = 'plotreportcontainer' + response.reportinstance;\n            switch (response.type) {\n                case 'pie':\n                    chart.piechart(response);\n                    break;\n                case 'spline':\n                case 'bar':\n                case 'column':\n                    chart.lbchart(response);\n                    break;\n                case 'solidgauge':\n                    chart.solidgauge(response);\n                    break;\n                case 'combination':\n                    chart.combinationchart(response);\n                    break;\n                case 'map':\n                    chart.WorldMap(response);\n                    break;\n                case 'treemap':\n                    chart.TreeMap(response);\n                    break;\n            }\n        },\n        /**\n         * Datatable serverside for all table type reports\n         * @param object args reportid\n         * @return Apply serverside datatable to report table\n         */\n        ReportDatatable: function(args) {\n            var self = this;\n            var params = {};\n            var reportinstance = args.instanceid ? args.instanceid : args.reportid;\n            params['filters'] = args.filters;\n            params['basicparams'] = args.basicparams || JSON.stringify(smartfilter.BasicparamsData(reportinstance));\n            params['reportid'] = args.reportid;\n            params['columns'] = args.columns;\n            //\n            // Pipelining function for DataTables. To be used to the `ajax` option of DataTables\n            //\n            $.fn.dataTable.pipeline = function(opts) {\n                // Configuration options\n                var conf = $.extend({\n                    url: '', // script url\n                    data: null, // function or object with parameters to send to the server\n                    method: 'POST' // Ajax HTTP method\n                }, opts);\n\n                return function(request, drawCallback, settings) {\n                    var ajax = true;\n                    var requestStart = request.start;\n                    var drawStart = request.start;\n                    var requestLength = request.length;\n                    var requestEnd = requestStart + requestLength;\n\n                    if (typeof args.data != 'undefined' && request.draw == 1) {\n                        json = args.data;\n                        json.draw = request.draw; // Update the echo for each response\n                        json.data.splice(0, requestStart);\n                        json.data.splice(requestLength, json.data.length);\n                        drawCallback(json);\n                    } else if (ajax) {\n                        // Need data from the server\n                        request.start = requestStart;\n                        request.length = requestLength;\n                        $.extend(request, conf.data);\n\n                        settings.jqXHR = $.ajax({\n                            \"type\": conf.method,\n                            \"url\": conf.url,\n                            \"data\": request,\n                            \"dataType\": \"json\",\n                            \"cache\": false,\n                            \"success\": function(json) {\n                                drawCallback(json);\n                            }\n                        });\n                    } else {\n                        json = $.extend(true, {}, cacheLastJson);\n                        json.draw = request.draw; // Update the echo for each response\n                        json.data.splice(0, requestStart - cacheLower);\n                        json.data.splice(requestLength, json.data.length);\n                        drawCallback(json);\n                    }\n                }\n            };\n            if (args.reportname == 'Users profile' || args.reportname == 'Course profile') {\n                var lengthoptions = [\n                    [50, 100, -1],\n                    [\"Show 50\", \"Show 100\", \"Show All\"]\n                ];\n            } else {\n                var lengthoptions = [\n                    [10, 25, 50, 100, -1],\n                    [\"Show 10\", \"Show 25\", \"Show 50\", \"Show 100\", \"Show All\"]\n                ];\n            }\n            var oTable = $('#reporttable_' + reportinstance).DataTable({\n                'processing': true,\n                'serverSide': true,\n                'destroy': true,\n                'dom': '<\"co_report_header\"Bf <\"report_header_skew\"  <\"report_header_skew_content\" Bl<\"report_header_showhide\" ><\"report_calculation_showhide\" >> > > tr <\"co_report_footer\"ip>',\n                'ajax': $.fn.dataTable.pipeline({\n                    \"type\": \"POST\",\n                    \"url\": M.cfg.wwwroot + '/blocks/learnerscript/components/datatable/server_processing.php?sesskey=' + M.cfg.sesskey,\n                    \"data\": params\n                }),\n                'columnDefs': args.columnDefs,\n                \"fnDrawCallback\": function(oSettings, json) {\n                    chart.SparkLineReport();\n                    helper.DrilldownReport();\n                },\n                \"oScroll\": {},\n                'responsive': true,\n                \"fnInitComplete\": function() {\n                    this.fnAdjustColumnSizing(true);\n                    // $(\".drilldown\" + reportinstance + \" .ui-dialog-title\").html(args.reportname);\n\n                    if (args.reportname == 'Users profile' || args.reportname == 'Course profile') {\n                        $(\"#reporttable_\" + reportinstance + \"_wrapper .co_report_header\").remove();\n                        $(\"#reporttable_\" + reportinstance + \"_wrapper .co_report_footer\").remove();\n                    }\n\n                    $('.download_menu' + reportinstance + ' li a').each(function(index) {\n                        var link = $(this).attr('href');\n                        if (typeof args.basicparams != 'undefined') {\n                            var basicparamsdata = JSON.parse(args.basicparams);\n                            $.each(basicparamsdata, function(key, value) {\n                                if (key.indexOf('filter_') == 0) {\n                                    link += '&' + key + '=' + value;\n                                }\n                            });\n                        }\n                        if (typeof(args.filters) != 'undefined') {\n                            var filters = JSON.parse(args.filters);\n                            $.each(filters, function(key, value) {\n                                if (key.indexOf('filter_') == 0) {\n                                    link += '&' + key + '=' + value;\n                                }\n                                if(key.indexOf('ls_') == 0) {\n                                    link += '&' + key + '=' + value;\n                                }\n                            });\n                        }\n                        $(this).attr('href', link);\n                    });\n                },\n                \"fnRowCallback\": function(nRow, aData, iDisplayIndex) {\n                    $(nRow).children().each(function(index, td) {\n                        $(td).css(\"word-break\", args.columnDefs[index].wrap);\n                        $(td).css(\"width\", args.columnDefs[index].width);\n                    });\n                    return nRow;\n                },\n                \"autoWidth\": false,\n                'aaSorting': [],\n                'language': {\n                    'paginate': {\n                        'previous': '<',\n                        'next': '>'\n                    },\n                    'sProcessing': \"<img src='\" + M.util.image_url('loading', 'block_learnerscript') + \"'>\",\n                    'search': \"_INPUT_\",\n                    'searchPlaceholder': \"Search\",\n                    'lengthMenu': \"_MENU_\",\n                    \"emptyTable\": \"<div class='alert alert-info'>No data available</div>\"\n                },\n                \"lengthMenu\": lengthoptions\n            });\n            $(\".drilldown\" + reportinstance + \" .ui-dialog-title\").html(args.reportname);\n            $(\"#page-blocks-learnerscript-viewreport #reporttable_\" + args.reportid + \"_wrapper div.report_header_showhide\").\n            html($('#export_options' + args.reportid).html());\n            if ($('.reportcalculation' + args.reportid).length > 0) {\n                $(\"#page-blocks-learnerscript-viewreport #reporttable_\" + args.reportid + \"_wrapper div.report_calculation_showhide\").\n                html('<img src=\"' + M.util.image_url('calculationicon', 'block_learnerscript') + '\" onclick=\"(function(e){ require(\\'block_learnerscript/helper\\').reportCalculations({reportid:' + args.reportid + '}) })(event)\" title =\"Calculations\" />');\n            }\n            // $('#export_options' + args.reportid).remove();\n        },\n        AddExpressions: function(e, value) {\n            $(e.target).on('select2:unselecting', function(e){\n                $('#fitem_id_'+e.params.args.data.id+'').remove();\n            });\n            var columns = $(e.target).val();\n            $.each(columns, function(index){\n                if($('#fitem_id_'+columns[index]).length > 0){\n                    return;\n                }\n                var column = [];\n                 column['name'] = columns[index];\n                 column.conditionsymbols = [];\n                 var conditions = [\"=\", \">\", \"<\", \">=\", \"<=\", \"<>\"];\n                 $.each(conditions, function(index, value){\n                    column.conditionsymbols.push({\n                        'value': value\n                    })\n                 });\n                var requestdata = { column: column };\n                templates.render('block_learnerscript/plotconditions', requestdata).then(function(html){\n                    //$(e.target).closest('form').find('#fitem_id_yaxis_bar').after(html);\n                    //$(e.target).closest('form').find('#fitem_id_yaxis').after(html);\n                    if(value == 'yaxisbarvalue') {\n                        $('#yaxis_bar1').append(html);\n                    } else {\n                        $('#yaxis1').append(html);\n                    }\n\n                }).fail(function(ex){});\n            });\n        },\n        block_statistics_help: function(reportid){\n                var promise = ajax.call({\n                    args: {\n                        action: 'learnerscriptdata',\n                        reportid: reportid\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                   require(['core/modal_factory'], function(ModalFactory) {\n                        ModalFactory.create({\n                            title: response.name,\n                            body: response.summary,\n                            footer: '',\n                        }).done(function(modal) {\n                            dialogue = modal;\n                            ModalEvents = require('core/modal_events');\n                            dialogue.getRoot().on(ModalEvents.hidden, function() {\n                                //window.location = M.cfg.wwwroot + '/blocks/learnerscript/viewreport.php?id=' + 10;\n                            });\n\n                            dialogue.show();\n                        });\n                    });\n                });\n        }\n       \n    };\n\n});"],"file":"report.min.js"}